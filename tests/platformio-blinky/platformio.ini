; PIO-Air105 — PlatformIO + Arduino Test Sample
; ==============================================
; This is a minimal "blinky + serial" test that validates the Arduino
; compatibility layer compiles and runs on real Air105 hardware.
;
; It references the PIO-Air105 framework directly from the repo root
; so you can iterate on the framework and test without publishing
; anything to the PlatformIO registry first.

[env:air105_core]
; --- Platform & Board ---------------------------------------------------
; Once the platform package is ready these will point at our custom
; platform definition.  For now they are placeholders that document the
; intended final shape.
platform  = air105                        ; TODO: platform-air105 package
board     = air105_core                   ; TODO: boards/air105_core.json
framework = arduino

; --- Toolchain ----------------------------------------------------------
; Cortex-M4F with hardware FPU
build_flags =
    -mcpu=cortex-m4
    -mthumb
    -mfloat-abi=hard
    -mfpu=fpv4-sp-d16
    -DAIR105
    -DARM_MATH_CM4
    -Os
    -Wall -Wextra
    -ffunction-sections
    -fdata-sections
    -fno-exceptions

build_unflags = -std=gnu++11              ; allow C++17 if we need it later

; --- Framework source ---------------------------------------------------
; Point PlatformIO at the framework-arduino-air105 tree that lives two
; directories above this test folder (repo root).
;
; PlatformIO resolves `board_build.core` to locate the `cores/<core>/`
; directory, and `board_build.variant` for the `variants/<variant>/`
; directory.  We override the framework search path so it finds ours.
;
; When the framework is published to the PlatformIO registry these
; overrides become unnecessary — users just write `framework = arduino`.
board_build.core    = air105
board_build.variant = air105_core_board
board_build.f_cpu   = 204000000L

; --- Upload -------------------------------------------------------------
upload_protocol = usb-dfu                 ; TODO: air105-usb-bootloader
upload_speed    = 1500000

; --- Monitor ------------------------------------------------------------
monitor_speed = 115200

; --- Library dependencies for the test ----------------------------------
; (none — this test only uses built-in Arduino API)
